var ieDetected = window.document.documentMode;
var firefoxDetected = window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);
var firefoxVersion = firefoxDetected ? parseInt(firefoxDetected[1], 0) : 0;

// Do not load Google Tag Manager for very old browsers
if (!ieDetected && (!firefoxDetected || firefoxVersion > 39)) {
  // <!-- Google Tag Manager -->
  (function (w, d, s, l, i) {
    w[l] = w[l] || []; w[l].push({
      'gtm.start':
        new Date().getTime(), event: 'gtm.js'
    }); var f = d.getElementsByTagName(s)[0],
      j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
        'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
  })(window, document, 'script', 'dataLayer', gtm_code);
  // <!-- End Google Tag Manager -->
}
